# Architecture Decision Records (ADR)

このディレクトリには、プロジェクトの重要な技術選定とアーキテクチャの決定を記録しています。

## ADR一覧

| # | タイトル | ステータス | 日付 |
|---|---------|-----------|------|
| [001](./001-tanstack-query-for-client-state.md) | TanStack Query採用によるクライアント側データ管理 | 採用 | 2025-11-06 |
| [002](./002-zustand-for-ui-state.md) | Zustand採用によるUI状態管理 | 採用 | 2025-11-06 |
| [003](./003-tanstack-query-vs-swr.md) | TanStack Query vs SWR 比較と選定理由 | 採用 | 2025-11-06 |

## 技術スタックの全体像

```
┌─────────────────────────────────────────────────────────────┐
│                     Next.js App Router                       │
│                                                               │
│  ┌────────────────┐         ┌────────────────┐              │
│  │  Server Side   │         │  Client Side   │              │
│  ├────────────────┤         ├────────────────┤              │
│  │ • fetch        │         │ • TanStack     │              │
│  │   (初期データ)  │         │   Query        │              │
│  │                │         │   (サーバー状態) │              │
│  │ • Server       │         │                │              │
│  │   Actions      │         │ • Zustand      │              │
│  │                │         │   (UI状態)      │              │
│  └────────────────┘         └────────────────┘              │
│                                                               │
│  ┌─────────────────────────────────────────────┐            │
│  │           Form & Validation                  │            │
│  │  • React Hook Form                          │            │
│  │  • Zod                                       │            │
│  └─────────────────────────────────────────────┘            │
│                                                               │
│  ┌─────────────────────────────────────────────┐            │
│  │              Testing                         │            │
│  │  • Vitest (Unit/Integration)                │            │
│  │  • Playwright (E2E)                          │            │
│  └─────────────────────────────────────────────┘            │
└─────────────────────────────────────────────────────────────┘
```

## 状態管理の責務分離

| 状態の種類 | 技術選定 | 用途例 |
|-----------|---------|--------|
| **サーバー状態** | TanStack Query | Todos一覧、詳細データ、API通信 |
| **UI状態** | Zustand | 検索フォーム表示、モーダル開閉 |
| **フォーム状態** | React Hook Form | 入力値、バリデーション |
| **URL状態** | Next.js Router | 検索パラメータ、ページング |

## ADRの読み方

各ADRは以下の構造で記載されています:

- **ステータス**: 採用/却下/検討中/廃止
- **コンテキスト**: なぜこの決定が必要だったか
- **決定事項**: 何を決定したか
- **理由**: なぜこの選択をしたか
- **トレードオフ**: メリット・デメリット
- **代替案**: 検討した他の選択肢と却下理由
- **結果**: 決定による影響

## ADRテンプレート

新しいADRを作成する場合は、以下のテンプレートを使用してください:

```markdown
# ADR XXX: タイトル

## ステータス

[採用/却下/検討中/廃止]

## コンテキスト

[背景と課題]

## 決定事項

[何を決定したか]

## 理由

[なぜこの決定をしたか]

## トレードオフ

### メリット
-

### デメリット
-

## 代替案

### 案1
**却下理由**:

## 結果

[決定による影響]

## 参考資料

-

## 更新履歴

- YYYY-MM-DD: 初版作成
```

## 関連ドキュメント

- [シーケンス図](../todos-page-sequence.md): Todosページのデータフローとシーケンス
- [プロジェクトREADME](../../README.md): プロジェクト全体の説明
